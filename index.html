<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>
  <button id="screen">Screen</button>
  <button id="camera">Camera</button>
  <button id="data">Data</button>

  <script type="text/javascript" src="lib/q/q.min.js"></script>
  <script type="text/javascript" src="lib/anchorman/anchorman.js"></script>
  <script type="text/javascript" src="lib/rsvp.js/index.js"></script>

  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
      window.anchorman = new Anchorman("ws://moya.clocktower.co:9000/session");

      anchorman.camera.receive(function(stream) {
        console.log("Camera ready", stream);
        var blob = URL.createObjectURL(stream.stream);
        var video = document.createElement("video");
        document.body.appendChild(video);

        video.src = blob;
        video.crossOrigin = true;
        video.autoplay = true;
        video.width = 300;
        video.height = 300;
      });

      document.getElementById("data").addEventListener("click", function() {
        anchorman.channels("test");
      });

      document.getElementById("screen").addEventListener("click", function() {
        anchorman.screen.share();
      });

      document.getElementById("camera").addEventListener("click", function() {
        anchorman.camera.broadcast();
      });
    });
  </script>
</body>
</html>
